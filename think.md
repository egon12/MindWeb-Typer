Ok, how to seperate the code


TextPreProcessor

textPreProcessor()

painter.draw(textPreProcessor())

painter = new Painter(divid, options);

painter.drawData(textPreProcessor(inputString));


Ok for textProcessor


defaultNode = {
    x : 
    y : 



}

getSettingsFromPrevious

if 1 or 2 && isNaN(a[1])
    setPositionFromSettings()

if !isNaN(a[1])
    setPositionForNext(x)

setSettingsForNext

if colstart
    color = color



Ok let's seperate

NamePositionAndLink


And then, 
Color, size and linkModifier
